<!DOCTYPE html>
<html lang="en">
  {% load static %}
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AEXP</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
   <style>
      .pn{
        padding: -10px;
        margin-top: -15px;
        margin-bottom: -15px;;
      }
      .tb {
      
        max-height: 450px !important;
        overflow: scroll;
      }
    </style>

</head>
<body>
  

  {% if messages %}
  {% for message in messages %}
    <script>swal("ERROR!","{{message}}","{{message.tags}}");</script>
  {% endfor %}
  {% endif %}
  
<nav class="navbar navbar-dark bg-dark">
    <h style="color: white; ">AEXP | axp_monthly_patching_dashboard_linux</h>
</nav>

<!-- Choice of Options -->
<div class="card mt-2"  >
  <span class="d-flex justify-content-center ">

    <span class="col-12 navbar  bg-light">
      <span class="col-1">
        <select class="btn bg-light" style="color: black;" name="new_wave" id="uwave" dir="rtl" required>
          <option value="">------env------</option>
          <option value="env1">env1</option>
          <option  value="env2">env2</option>
          <option  value="env3">env3</option>
        </select>
      </span>
      <span class="col-1">
        <select class="btn bg-light" style="color: black;" name="new_wave" id="uwave" dir="rtl" required>
          <option value="">------mnt------</option>
          <option value="jan">Jan</option>
          <option value="feb">Feb</option>
          <option value="mar">Mar</option>
          <option value="apr">Apr</option>
        </select>
      </span>
      <span class="col-1">
        <select class="btn bg-light" style="color: black;" name="new_wave" id="uwave" dir="rtl" required>
          <option value="">------tla------</option>
          <option value="env1">tla1</option>
          <option  value="env2">tla2</option>
          <option  value="env3">tla3</option>
        </select>
      </span>
      <span class="col-2">
        <button class="btn col-12 form-control btn-light" style="margin-left: -20px; padding-left:40px; padding-right:40px;">Apply Filters</button>
      </span>
      
      <span class="col-1.5">
        <input class="btn" type="radio" checked name="temp_per" id="">
        <label for="" style="color: black;">Temporary</label>
      </span>
      <span class="col-1.5">
        <input class="btn" type="radio" name="temp_per" id="">
        <label for=""  style="color: black;"> &nbsp Permanent</label>
      </span>
      <span class="col-1.5">
        <input class="btn" type="radio" checked name="one_zero" id="">
        <label for="" style="color: black;"> &nbsp One Touch</label>
      </span>
      <span class="col-1.5">
        <input class="btn" type="radio" name="one_zero" id="">
        <label for="" style="color: black;"> &nbsp Zero Touch</label>
      </span>

    </span>
  </span>
</div>

<div class="container mt-4 ">




  <!-- Table -->

  <form action="/" enctype="multipart/form-data"  method="post">
    {% csrf_token %}
  <div class="tb">
    <table class="table"  name="table" id="myTable">
        <thead class="thead-dark ">
          <tr>
            <th scope="col">#</th>
            <th scope="col">server_name </th>
            <th scope="col">waveinfo</th>
            <th scope="col">app_accronym</th>
            <th scope="col">dashboard_month</th>
          </tr>
        </thead>
        <tbody class="tb">
          {%  for li in lis %}
          <tr >
            <th scope="row"> <input class="btn" type="checkbox" name="{{li.server_name}}"> </th>
            <td>{{li.server_name}}</td>
            <td>{{li.waveinfo}}</td>
            <td>{{li.app_acronym}}</td>
            <td>{{li.dashboard_mnt}}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      </div>
      
  

  <!-- Random Selection -->
  <div class="card mt-2 p-4 bg-dark" >
 
    <input type="text" name="itype" id="" value="1" style="display: none;">
    <span class="d-flex justify-content-center row">
      <span class="col-4 pn">
        <input type="text" id="myInput" onkeyup="myFunction()" class="btn col-12" name="temp" placeholder="type to search">
      </span>
      <span class="col-4 pn">
        <select class="btn col-12" name="new_wave" id="uwave" dir="rtl" required>
          <option value="">-- set new wave as --</option>
          <option value="wave1">wave1</option>
          <option  value="wave2">wave2</option>
          <option  value="wave3">wave3</option>
          <option  value="wave4">wave4</option>
          <option  value="wave5">wave5</option>
          <option  value="wave6">wave6</option>
          <option  value="wave7">wave7</option>
          <option  value="wave8">wave8</option>
          <option  value="wave9">wave9</option>
          <option  value="wave10">wave10</option>
          <option  value="wave11">wave11</option>
          <option  value="wave12">wave12</option>
          <option  value="wave13">wave13</option>
          <option  value="wave14">wave14</option>
          <option  value="wave15">wave15</option>
          <option  value="wave16">wave16</option>
        </select>
      </span>
      <span class="col-4 pn">
      <button class="btn col-12 " type="submit"> Update Selected Data </button>
      </span>
    </span>
  </form>
  </div>


    <!-- text field -->
    <div class="card mt-4 pt-3 pl-3 pr-3 pb-2 " >
        <h5 data-toggle="collapse" data-target="#input_data" class=" card-title" style="cursor: pointer;"> 
          âž– Provide text details for update</h5>
          
        <form action="/" enctype="multipart/form-data"  method="post" class="collapse" id="input_data">
            {% csrf_token %}
            <input type="text" name="itype" id="" value="2" style="display: none;">
            <h6 class=" card-title" >
              Kindly enter the details in the following order: server_name, waveinfo </h6>
  
        <div>
            <textarea name="details" rows="10" style="width: 100%;"></textarea>
            
            <button type="submit" class="btn form-control btn-dark" >Update</button>
        </div>
        </form>
    </div>


    <!-- Table updated -->
{% if ulis %}
  <div class="mt-5" ><h5>Recenty Updated Records</h5></div>
    <div  class="mt-2 tb" id="update_table" >

    <table  class="table mt-2" >
      <thead class="thead-dark">
        <tr>
          <th scope="col">server_name </th>
          <th scope="col">waveinfo</th>
          <th scope="col">app_accronym</th>
          <th scope="col">dashboard_month</th>
        </tr>
      </thead>
      <tbody >
        {%  for li in ulis %}
        <tr>          
          <td>{{li.server_name}}</td>
          <td>{{li.waveinfo}}</td>
          <td>{{li.app_acronym}}</td>
          <td>{{li.dashboard_mnt}}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
{% endif %}
</div>



<script>
  function myFunction() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");
    for (i = 0; i < tr.length; i++) {
      td = tr[i].getElementsByTagName("td")[0];
      if (td) {
        txtValue = td.textContent || td.innerText;
        if (txtValue.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
        } else {
          tr[i].style.display = "none";
        }
      }       
    }
  }
  </script>


<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.3/dist/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
</body>
</html>